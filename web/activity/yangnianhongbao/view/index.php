<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>吉羊送福来，羊气过新年</title>
<script type="text/javascript" src="web/activity/yangnianhongbao/js/jquery-2.1.1.min.js"></script>
<style type="text/css">
body {
	               margin: 0 auto;
	               padding: 0;
	               text-align: center;
}
a {
	               text-decoration: none;
                   -webkit-tap-highlight-color: rgba(0,0,0,0);
}
.float_left {
	               float: left;
}
.float_right {
	               float: right;
}
.clear {
	               clear: both;
}
.relative {
	               position: relative;
}
.absolute {
	               position: absolute;
}
.tab {
	               width: 189px; 
	               height: 66px;
	               margin-top:8px;
	               line-height: 66px;
	               display: inline-block;
                   color: #ecac64;
                   font-size: 32px;
}


</style>
</head>
<body>
    <div id="main" class="relative" style="width: 1280px;height: 800px; margin: 0 auto; background: url(web/activity/yangnianhongbao/image/bg.jpg);">
        <div id="header" style="height: 74px;background: url(web/activity/image/head_ddz.png)">
            <a id="tab_2" class="tab float_right" href="javaScript:;" style="background: url(web/activity/image/caidan_leave.png);margin-right: 190px;">活动介绍</a>
            <a id="tab_1" class="tab float_right" href="javaScript:;" style="background: url(web/activity/image/caidan_on.png);margin-right: 15px;">活动</a>
        </div>
        <div id="content" class="relative" style=" width: 1280px; height: 726px;">
            <div id="table_1" >
                <div style="position: absolute; left:210px; bottom: 125px;">
                    <div style="position: relative; display: inline-block; padding-right: 50px;">
                        <div id="bronze" class="butn">
                            <div style="margin: auto; display: inherit;">
                                <img id="bronze-colse" src="web/activity/yangnianhongbao/image/bronze.png" style=" margin: auto; display: block;">
                                <img id="bronze-open" src="web/activity/yangnianhongbao/image/bronze-open.png" style="position: absolute; left: 3px; top: -96px; display: none;">
                            </div>
                            <div style=" padding: 10px 0;">
                                <img id="bronze-leave" src="web/activity/yangnianhongbao/image/get6-leave.png">
                                <img id="bronze-disable" src="web/activity/yangnianhongbao/image/get6-disable.png" style=" position: absolute; left: 0; top: 313px; display: none; z-index: 1;">
                                <img id="bronze-done" src="web/activity/yangnianhongbao/image/get6-done.png" style=" position: absolute; left: 0; top: 313px; display: none; z-index: 2;">
                            </div>
                        </div>
                        <div id="bronze-disabled" style=" width:251px; height:394px; position:absolute; left: 0; top: 0; z-index:2; display: none;"></div>
                    </div>
                    <div style="position: relative; display: inline-block; padding-right: 50px;">
                        <div id="silver" class="butn">
                            <div style="margin: auto; display: inherit;">
                                <img id="silver-colse" src="web/activity/yangnianhongbao/image/silver.png" style=" margin: auto; display: block;">
                                <img id="silver-open" src="web/activity/yangnianhongbao/image/silver-open.png" style="position: absolute; left: 3px; top: -96px; display: none;">
                            </div>
                            <div style=" padding: 10px 0;">
                                <img id="silver-leave" src="web/activity/yangnianhongbao/image/get12-leave.png">
                                <img id="silver-disable" src="web/activity/yangnianhongbao/image/get12-disable.png" style=" position: absolute; left: 0; top: 313px; display: none; z-index: 1;">
                                <img id="silver-done" src="web/activity/yangnianhongbao/image/get12-done.png" style=" position: absolute; left: 0; top: 313px; display: none; z-index: 2;">
                            </div>
                        </div>
                        <div id="silver-disabled" style=" width:251px; height:394px; position:absolute; left: 0; top: 0; z-index:2; display: none;"></div>
                    </div>
                    <div style="position: relative; display: inline-block;">
                        <div id="gold" class="butn">
                            <div style=" margin: auto; display: inherit;">
                                <img id="gold-colse" src="web/activity/yangnianhongbao/image/gold.png" style=" margin: auto; display: block;">
                                <img id="gold-open" src="web/activity/yangnianhongbao/image/gold-open.png" style="position: absolute; left: 3px; top: -96px; display: none;">
                            </div>
                            <div style=" padding: 10px 0;">
                                <img id="gold-leave" src="web/activity/yangnianhongbao/image/get50-leave.png">
                                <img id="gold-disable" src="web/activity/yangnianhongbao/image/get50-disable.png" style=" position: absolute; left: 0; top: 313px; display: none; z-index: 1;">
                                <img id="gold-done" src="web/activity/yangnianhongbao/image/get50-done.png" style=" position: absolute; left: 0; top: 313px; display: none; z-index: 2;">
                            </div>
                        </div>
                        <div id="gold-disabled" style=" width:251px; height:394px; position:absolute; left: 0; top: 0; z-index:2; display: none;"></div>
                    </div>
                </div>
                <div style="position: absolute; left: 200px; top: 610px; color: #F4B457; font-size: 20px;">
                    <div style="display: inline-block; vertical-align: top;">
                        <p>
                                                    活动规则：
                        </p>
                    </div>
                    <div style="display: inline-block; text-align: left;">
                        <p>
                            1. 充值满6元，12元，50元可分别抽取铜羊，银羊，金羊红包。
                        </p>
                        <p>
                            2. 红包内含红米手机，20元话费，游戏币，金羊获奖概率最高，铜羊最低。
                        </p>
                    </div>
                </div>
                <div id="mess" class="absolute" style=" background-color: black; left: 0; top: 0; opacity: 0.6; z-index: 4; width: 1280px; height: 597px; display: none;"></div>
                <div id="message" class="absolute" style=" left: 0; top: 0; z-index: 5; width: 1280px; height: 597px;  display: none;">
                    <div style=" background: url(web/activity/yangnianhongbao/image/pop.png); width: 1010px; height: 597px; margin: 30px auto;">
                        <div style="padding-top: 160px; font-size: 38px; color: #fff; line-height: 58px">恭喜您获得&nbsp;<span id="rewordNumber" style="color: #FEB812; font-size: 58px; vertical-align: bottom;"></span>&nbsp;金币</div>
                        <div style=" margin: 10px 0;"><img src="web/activity/yangnianhongbao/image/coin.png"></div>
                        <div id="ensure" style=" width: 260px; margin: auto;"><img src="web/activity/yangnianhongbao/image/ensure-leave.png"></div>
                    </div>
                </div>
            </div>
            <!-- 活动说明 -->
            <div id="table_2" style="display: none;">
                <div style="color: #fff; width: 1000px; text-align: left; margin: 100px auto; font-size: 36px;">
                    <div style="padding: 10px;">活动内容:</div>
                    <div style="padding: 10px;">1.充值满6元，12元，50元可分别抽取铜羊，银羊，金羊红包</div>
                    <div style="padding: 10px;">2.红包内含红米手机，100元话费，游戏币，金羊获大奖概率最高，铜羊最低</div>
                    <div style="padding: 30px 10px;">最终解释权归点乐游戏所有</div>
                </div>
            </div>
        </div>
        <div id="caution" class="absolute" style="left:50%;top:50%; z-index: 10; margin: -50px 0 0 -175px; display: none;">
        	<div class="relative">
		        <div style="background-color:#000; border-radius:30px; width:350px; height:105px; opacity:0.8;"></div>
		        <span id="cmessage" class="absolute" style="color:#FFF; line-height:105px; font-size: 30px; z-index:100; left:0; top:0; width:350px; height:105px; line-height:105px;"></span>
	       	</div>
       	</div>
    </div>
</body>
<script type="text/javascript">
$(this).ready(function(){
	//头部卡片切换
	$(".tab").click(function(){
		var now_tab = $(this).attr("id").replace("tab_","");
		$("#table_1").hide();
		$("#table_2").hide();
		$("#tab_1").css("background-image","url(web/activity/image/caidan_leave.png)");
		$("#tab_2").css("background-image","url(web/activity/image/caidan_leave.png)");
		if(now_tab==1){
			$("#tab_1").css("background-image","url(web/activity/image/caidan_on.png)");
			$("#table_1").show();
		}else {
			$("#tab_2").css("background-image","url(web/activity/image/caidan_on.png)");
			$("#table_2").show();
		}
	});

    $(".butn").click(function(){
        var id = $(this).attr("id");//$(this).attr("id").replace("-leave","");
        var tapType;
        
        switch(id){
            case 'bronze':
                tapType = 1;
                break;
            case 'silver':
                tapType = 2;
                break;
            case 'gold':
                tapType = 3;
                break;
        }
        
        $.ajax({
            type:"POST",
            url:"<?php echo $url ?>?m=activity&p=dispath&fpath=yangnianhongbao&mtkey=<?php echo $mtkey?>&act=go",
            dataType: 'json',
            data:"gameid=<?php echo $gameid?>"
				+"&mid=<?php echo $mid?>"
				+"&sid=<?php echo $sid?>"
				+"&cid=<?php echo $cid?>"
				+"&pid=<?php echo $pid?>"
				+"&ctype=<?php echo $ctype?>"
				+"&tapType="+tapType,
            success:function(json){
                var money   = json.money;
                var status  = json.status;
                var chongzhi  = json.chongzhi;
                //var shengyu = json.shengyu;
                //var cishu   = json.cishu;
                var liuyuan = json.liuyuan;
                var shieryuan = json.shieryuan;
                var wushiyuan = json.wushiyuan;

                if(status == '1'){
                	butnClick(id,money);
                	cover(chongzhi,liuyuan, shieryuan, wushiyuan);
                }else{
                	$("#cmessage").text("出错了！("+status+")");
                	$("#caution").stop(true,true).fadeIn(100);
    				$("#caution").stop(true,true).fadeOut(3000);
                }
            }
        });
        
    });

    function cover(chongzhi,liuyuan, shieryuan, wushiyuan){
        if(liuyuan == 1　|| chongzhi < 6){
        	$("#bronze-disable").show();
    		$("#bronze-disabled").show();
    		if(liuyuan == 1){
    			$("#bronze-done").show();
    		}
        }
        if(shieryuan == 1 || chongzhi < 12){
        	$("#silver-disable").show();
        	$("#silver-disabled").show();
        	if(shieryuan == 1){
        		$("#silver-done").show();
            }
        }
        if(wushiyuan == 1 || chongzhi < 50){
            $("#gold-disable").show();
            $("#gold-disabled").show();
            if(wushiyuan == 1){
            	$("#gold-done").show();
            }
        }
    }
    
    /*function cover(shengyu, cishu){
        if(shengyu < 30 || cishu >= 10){
            $("#gold-disable").show();
            $("#gold-disabled").show();
            if(shengyu < 12 || cishu >= 10){
            	$("#silver-disable").show();
            	$("#silver-disabled").show();
            	if(shengyu < 6 || cishu >= 10){
            		$("#bronze-disable").show();
            		$("#bronze-disabled").show();
                }
            }
        }
    }*/

    cover(<?php echo (isset($chongzhi) ? $chongzhi : 0)?>,<?php echo (isset($liuyuan) ? $liuyuan : 1)?>,<?php echo (isset($shieryuan) ? $shieryuan : 1)?>,<?php echo (isset($wushiyuan) ? $wushiyuan : 1)?>);
    
    function butnClick(id,money){
        $("#"+id+"-open").show();
        setTimeout(function(){
            $("#rewordNumber").text(money);
           	$("#mess").show();
            $("#message").show();
        },500);
    };
	
    $("#ensure").click(function(){
    	$("#bronze-open").hide();
    	$("#silver-open").hide();
    	$("#gold-open").hide();
        $("#mess").hide();
        $("#message").hide();
    });
    
});
</script>
</html>